- defaults:
    link:
      create: true
      relink: true
      force: true
    shell:
      stdout: true
      stderr: true
      stdin: true

- clean: ["~", "~/.config", "~/.npm-global"]

- link:
    ~/.env: env/
    ~/.zsh_plugins.txt: shell/zsh_plugins
    ~/.zshenv: shell/zshenv
    ~/.zshrc: shell/zshrc
    ~/.p10k.zsh: shell/p10k.zsh
    ~/.gitconfig: git/gitconfig
    ~/.config/alacritty/alacritty.toml: config/alacritty.toml
    ~/.tmux.conf: config/tmux.conf
    ~/.mackup.cfg: config/mackup/mackup.cfg
    ~/.mackup/tokens.cfg: config/mackup/tokens.cfg
    ~/.npmrc:
      create: true
      path: config/.npmrc
      relink: true
- create:
    - ~/Library/Fonts
    - ~/Projects
    - ~/Backups

- shell:
    # Fonts
    - description: "Cleaning user fonts"
      command: "sudo rm -f -- ~/Library/Fonts/*"
    - description: "Installing fonts"
      command: "./vendor/font-powerline/install.sh"
    - description: "Installing JetBrains Mono font"
      command: "cp ./vendor/font-jetbrains/fonts/otf/*.otf ~/Library/Fonts"

    # Terminals
    - description: "Install Alacritty themes"
      command: "git clone https://github.com/alacritty/alacritty-theme ~/.config/alacritty/themes"
      stderr: true

    - description: "Install Tmux plugin manager"
      command: "git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm"
      stderr: true

    - description: "Make scripts and defaults executable"
      command: "chmod +x ./scripts/* && chmod +x ./defaults/*"
      stderr: true

    # Applications
    - description: "Install Homebrew"
      command: ./scripts/setup_homebrew.zsh
      stderr: true

    - description: "Restore App settings via Mackup"
      command: "mackup restore"
      stderr: true

    - description: "Configure mac defaults"
      command: "sudo ./defaults/macos.zsh"
      stderr: true

    - description: "Configure application defaults"
      command: "./defaults/net.freemacsoft.AppCleaner.zsh && ./defaults/intelliscapesolutions.Caffeine.zsh"
      stderr: true

    # Development
    - description: "Configure Wakatime"
      command: "./scripts/wakatime.zsh"
      stderr: true

    - description: "Configure the Node Version Manager (fnm from Vercel)"
      command: "./scripts/fnm.zsh"
      stderr: true

    - description: "Install Node global packages"
      command: "./scripts/npm.zsh
        madge
        serve
        conventional-changelog-eslint
        tldr"
      stderr: false
