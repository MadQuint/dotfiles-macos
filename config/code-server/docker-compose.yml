version: "3.8"

services:
  code-server:
    image: codercom/code-server:latest
    container_name: code-server
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - PASSWORD=your-secure-password-change-me
      - SUDO_PASSWORD=your-secure-password-change-me
    volumes:
      - /Users/gianni/Projects:/home/coder/projects
      - /Users/gianni/dotfiles-macos:/home/coder/dotfiles:ro
      - /Users/gianni/.ssh:/home/coder/.ssh:ro
      - /Users/gianni/.gitconfig:/home/coder/.gitconfig:ro
      - code-server-config:/home/coder/.config
      - code-server-local:/home/coder/.local
    command: --bind-addr 0.0.0.0:8080 --auth password /home/coder/projects

volumes:
  code-server-config:
  code-server-local:
